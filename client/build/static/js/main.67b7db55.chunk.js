(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{169:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(30),c=a.n(r),l=a(11),o=a(13),i=(a(92),a(93),a(84)),u=a(7),m=["component"],p=function(e){var t=e.component,a=Object(i.a)(e,m),n=Object(u.c)((function(e){return e.user})),r=n.isAuthenticated,c=n.loading;return s.a.createElement(o.b,Object.assign({},a,{render:function(e){return r||c?s.a.createElement(t,e):s.a.createElement(o.a,{to:"/login"})}}))},d=a(12),b=a(4),f=a.n(b),E=a(8),v=a(9),h=a.n(v),O=function(e){e?h.a.defaults.headers.common.Authorization="ElephantJWToken ".concat(e):delete h.a.defaults.headers.common["x-auth-token"]},N={headers:{"Content-Type":"application/json"}},g=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t){"boolean"!==typeof e&&(e=!1),t({type:"SET_LOADING",payload:e})}},j=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t){"boolean"!==typeof e&&(e=!1),t({type:"SET_LOADING_PARTIAL",payload:e})}},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"TASKS";return function(t){["TASKS","PROCESSES","NOTES","COLLECTIONS"].includes(e)||(e="TASKS"),t({type:"CHANGE_MODE",payload:e})}},_=function(e){return function(){var t=Object(E.a)(f.a.mark((function t(a){var n,s;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=e.noteToUpdateId,t.next=4,h.a.patch("/api/notes/edit_note/".concat(n),e,N);case 4:return s=t.sent,a({type:"UPDATE_NOTE",payload:s.data}),t.abrupt("return",!0);case 9:return t.prev=9,t.t0=t.catch(0),a(M(t.t0.response&&t.t0.response.data&&404!==t.t0.response.status&&t.t0.response.data.error_msg?t.t0.response.data.error_msg:["Oops, une erreur inattendue s'est produite"])),t.abrupt("return",!1);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},y=function(e){return function(){var t=Object(E.a)(f.a.mark((function t(a){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a(g(!0)),t.next=4,h.a.post("/api/processes/new_process",e,N);case 4:n=t.sent,a({type:"ADD_PROCESS",payload:n.data}),a(g(!1)),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),a(M(t.t0.response&&t.t0.response.data&&404!==t.t0.response.status&&t.t0.response.data.error_msg?t.t0.response.data.error_msg:["Oops, une erreur inattendue s'est produite"])),a(g(!1));case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},x=function(e,t){return function(){var a=Object(E.a)(f.a.mark((function a(n){var s;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n(j(!0)),a.next=4,h.a.delete("/api/tasks/delete_task/".concat(e),N);case 4:if(s=a.sent,n({type:"DELETE_TASK",payload:s.data}),n(j(!1)),!t){a.next=9;break}return a.abrupt("return",{success:!0});case 9:a.next=15;break;case 11:a.prev=11,a.t0=a.catch(0),n(M(a.t0.response&&a.t0.response.data&&404!==a.t0.response.status&&a.t0.response.data.error_msg?a.t0.response.data.error_msg:["Oops, une erreur inattendue s'est produite"])),n(j(!1));case 15:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(e){return a.apply(this,arguments)}}()},S=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(){var a=Object(E.a)(f.a.mark((function a(n){var s;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n(j(!0)),a.next=4,h.a.patch("/api/tasks/finish_task/".concat(e),N);case 4:if(s=a.sent,n({type:"FINISH_TASK",payload:s.data}),n(j(!1)),!t){a.next=9;break}return a.abrupt("return",s.data);case 9:a.next=15;break;case 11:a.prev=11,a.t0=a.catch(0),n(M(a.t0.response&&a.t0.response.data&&404!==a.t0.response.status&&a.t0.response.data.error_msg?a.t0.response.data.error_msg:["Oops, une erreur inattendue s'est produite"])),n(j(!1));case 15:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(e){return a.apply(this,arguments)}}()},C=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(){var a=Object(E.a)(f.a.mark((function a(n){var s;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n(j(!0)),a.next=4,h.a.patch("/api/tasks/unfinish_task/".concat(e),N);case 4:if(s=a.sent,n({type:"UNFINISH_TASK",payload:s.data}),n(j(!1)),!t){a.next=9;break}return a.abrupt("return",s.data);case 9:a.next=15;break;case 11:a.prev=11,a.t0=a.catch(0),n(M(a.t0.response&&a.t0.response.data&&404!==a.t0.response.status&&a.t0.response.data.error_msg?a.t0.response.data.error_msg:["Oops, une erreur inattendue s'est produite"])),n(j(!1));case 15:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(e){return a.apply(this,arguments)}}()},w=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(){var a=Object(E.a)(f.a.mark((function a(n){var s,r;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n(j(!0)),s=e.taskToUpdateId,a.next=5,h.a.patch("/api/tasks/edit_task_simple/".concat(s),e,N);case 5:if(r=a.sent,n({type:"UPDATE_TASk",payload:r.data}),n(j(!1)),!t){a.next=10;break}return a.abrupt("return",r.data);case 10:a.next=16;break;case 12:a.prev=12,a.t0=a.catch(0),n(M(a.t0.response&&a.t0.response.data&&404!==a.t0.response.status&&a.t0.response.data.error_msg?a.t0.response.data.error_msg:["Oops, une erreur inattendue s'est produite"])),n(j(!1));case 16:case"end":return a.stop()}}),a,null,[[0,12]])})));return function(e){return a.apply(this,arguments)}}()},D=function(){return function(){var e=Object(E.a)(f.a.mark((function e(t){var a,n,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(j(!0)),e.next=4,h.a.get("/api/collections/get_all_collections");case 4:a=e.sent,n=a.data.collections,s=a.data.msg,t({type:"LOAD_COLLECTIONS",payload:{collections:n,msg:s}}),t(j(!1)),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),t(M(e.t0.response&&e.t0.response.data&&404!==e.t0.response.status&&e.t0.response.data.error_msg?e.t0.response.data.error_msg:["Oops, une erreur inattendue s'est produite"])),t(j(!1));case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},T=function(e){return function(){var t=Object(E.a)(f.a.mark((function t(a){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a(j(!0)),t.next=4,h.a.post("/api/collections/create_collection",e,N);case 4:n=t.sent,a({type:"ADD_NEW_COLLECTION",payload:n.data}),a(j(!1)),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),a(M(t.t0.response&&t.t0.response.data&&404!==t.t0.response.status&&t.t0.response.data.error_msg?t.t0.response.data.error_msg:["Oops, une erreur inattendue s'est produite"])),a(j(!1));case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},A=function(e){return function(t){t({type:"REMOVE_FROM_COLLECTION",payload:e})}},I=function(e){return function(t){t({type:"ADD_TO_COLLECTION",payload:e})}},M=function(e){return function(t){t({type:"SET_ERROR_MSGS",payload:Object(d.a)(e)})}},L=function(){return s.a.createElement("div",{className:"mt-5"},s.a.createElement("progress",{className:"progress is-large is-info mt-5",max:"100"},"60%"))},F=a(6),R=function(){var e=Object(u.b)(),t=Object(n.useState)(!1),a=Object(F.a)(t,2),r=a[0],c=a[1];return s.a.createElement("div",null,s.a.createElement("nav",{className:"navbar is-info",role:"navigation","aria-label":"main navigation"},s.a.createElement("div",{className:"navbar-brand"},s.a.createElement("a",{onClick:function(){c(!r)},role:"button",className:"navbar-burger burger ".concat(r?"is-active":""),"aria-label":"menu","aria-expanded":"false","data-target":"navbarBasicExample"},s.a.createElement("span",{"aria-hidden":"true"}),s.a.createElement("span",{"aria-hidden":"true"}),s.a.createElement("span",{"aria-hidden":"true"}))),s.a.createElement("div",{id:"navMenu",className:"navbar-menu ".concat(r?"is-active":"")},s.a.createElement("div",{className:"navbar-start"},s.a.createElement("a",{className:"navbar-item",onClick:function(){e(k("TASKS"))}},"Mes T\xe2ches"),s.a.createElement("a",{className:"navbar-item",onClick:function(){e(k("NOTES"))}},"Mes Notes"),s.a.createElement("a",{className:"navbar-item",onClick:function(){e(k("PROCESSES"))}},"Mes Processus"),s.a.createElement("a",{className:"navbar-item",onClick:function(){e(k("COLLECTIONS"))}},"Mes Collections")),s.a.createElement("div",{className:"navbar-end"},s.a.createElement("div",{className:"navbar-item"},s.a.createElement("div",{className:"buttons"},s.a.createElement("a",{className:"button is-dark",onClick:function(){e((function(e){e({type:"LOGOUT"})}))}},"D\xe9connexion")))))))},P=a(176),U=a(3),G=function(e){var t,a=Object(U.a)({},e).note,r=Object(n.useState)(!1),c=Object(F.a)(r,2),o=c[0],i=c[1];return s.a.createElement("div",{className:"box"},s.a.createElement("div",{className:"content"},s.a.createElement("p",null,o?a.content:(t=a.content).length>150?t.slice(0,146)+"...":t),a.content.length>150&&s.a.createElement("button",{className:"button is-info is-small",onClick:function(){i(!o)}},o?"R\xe9duire":"D\xe9velopper"),s.a.createElement(l.b,{className:"has-text-weight-medium ml-2",to:"/note/".concat(a._id)},"Voir")))},K=function(){return s.a.createElement("div",{className:"mt-5"},s.a.createElement("progress",{className:"progress is-large is-info mt-5",max:"100"},"60%"))},z=function(){var e=Object(u.c)((function(e){return e.user})),t=e.loading_partial,a=e.notes,r=Object(u.b)(),c=Object(n.useState)(!1),l=Object(F.a)(c,2),o=l[0],i=l[1],m=Object(n.useState)(""),p=Object(F.a)(m,2),d=p[0],b=p[1];Object(n.useEffect)((function(){r(function(){var e=Object(E.a)(f.a.mark((function e(t){var a,n,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(j(!0)),e.next=4,h.a.get("/api/notes/get_all_notes");case 4:a=e.sent,n=a.data.notes,s=a.data.msg,t({type:"LOAD_NOTES",payload:{notes:n,msg:s}}),t(j(!1)),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),t(M(e.t0.response&&e.t0.response.data&&404!==e.t0.response.status&&e.t0.response.data.error_msg?e.t0.response.data.error_msg:["Oops, une erreur inattendue s'est produite"])),t(j(!1));case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}())}),[]);return s.a.createElement("div",{className:"columns is-mobile"},s.a.createElement("div",{className:"column is-three-fifths is-offset-one-fifth"},t?s.a.createElement(K,null):s.a.createElement(n.Fragment,null,s.a.createElement("div",{className:"block"},o?s.a.createElement("div",{className:"block"},s.a.createElement("form",{onSubmit:function(e){e.preventDefault();try{r((t={content:d},function(){var e=Object(E.a)(f.a.mark((function e(a){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.post("/api/notes/new_note",t,N);case 3:n=e.sent,a({type:"ADD_NOTE",payload:n.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a(M(e.t0.response&&e.t0.response.data&&404!==e.t0.response.status&&e.t0.response.data.error_msg?e.t0.response.data.error_msg:["Oops, une erreur inattendue s'est produite"]));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}catch(a){r(M([a.response.data.error_msg]))}finally{i(!1),b("")}var t}},s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Nouvelle note"),s.a.createElement("p",{className:"control"},s.a.createElement("textarea",{className:"textarea is-info",onChange:function(e){b(e.target.value)},value:d,placeholder:"Contenu",name:"content"}))),s.a.createElement("div",{className:"buttons"},s.a.createElement("button",{className:"button is-small is-info",type:"submit"},"Ajouter"),s.a.createElement("button",{className:"button is-small is-warning",onClick:function(){i(!1)}},"Annuler")))):s.a.createElement("div",{className:"block"},s.a.createElement("button",{className:"button is-medium is-info mt-5",onClick:function(){i(!0)}},"Ajouter une note")),s.a.createElement("div",{className:"block"},a&&a.length>0?a.map((function(e){return s.a.createElement(G,{key:Object(P.a)(),note:e})})):s.a.createElement("div",null,s.a.createElement("p",{className:"is-size-3"},"Aucune note charg\xe9e")))))))},H=a(14),q=function(e){var t=Object(U.a)({},e).process;return s.a.createElement(l.b,{to:"/process/".concat(t._id),className:"box has-background-info-light"},s.a.createElement("div",null,s.a.createElement("h4",null,t.title),s.a.createElement("p",null,t.steps.length," \xe9tape",t.steps.length>1&&"s")))},V=function(){var e=Object(u.c)((function(e){return e.user})),t=e.loading_partial,a=e.processes,r=Object(u.b)(),c=Object(n.useState)(!1),l=Object(F.a)(c,2),o=l[0],i=l[1],m=Object(n.useState)({title:"",description:""}),p=Object(F.a)(m,2),d=p[0],b=p[1],v=function(e){b(Object(U.a)(Object(U.a)({},d),{},Object(H.a)({},e.target.name,e.target.value)))},O=function(){var e=Object(E.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault();try{r(y({title:d.title,description:d.description}))}catch(a){r(M([a.response.data.error_msg]))}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){r(function(){var e=Object(E.a)(f.a.mark((function e(t){var a,n,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(j(!0)),e.next=4,h.a.get("/api/processes/get_all_processes");case 4:a=e.sent,n=a.data.processes,s=a.data.msg,t({type:"LOAD_PROCESSES",payload:{processes:n,msg:s}}),t(j(!1)),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),t(M(e.t0.response&&e.t0.response.data&&404!==e.t0.response.status&&e.t0.response.data.error_msg?e.t0.response.data.error_msg:["Oops, une erreur inattendue s'est produite"])),t(j(!1));case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}())}),[]),s.a.createElement("div",{className:"columns is-mobile"},s.a.createElement("div",{className:"column is-three-fifths is-offset-one-fifth"},t?s.a.createElement(K,null):s.a.createElement(n.Fragment,null,s.a.createElement("div",{className:"block mt-5"},o?s.a.createElement("div",{className:"block"},s.a.createElement("form",{className:"my-5",onSubmit:O},s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Titre"),s.a.createElement("p",{className:"control"},s.a.createElement("input",{className:"input is-info",type:"text",name:"title",onChange:v,placeholder:"Titre...",value:d.title}))),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Description"),s.a.createElement("p",{className:"control"},s.a.createElement("textarea",{className:"textarea is-info",onChange:v,placeholder:"Description...",name:"description",value:d.description}))),s.a.createElement("div",{className:"field is-grouped"},s.a.createElement("div",{className:"control"},s.a.createElement("button",{type:"submit",className:"button is-info"},"Cr\xe9er")),s.a.createElement("div",{className:"control"},s.a.createElement("button",{onClick:function(){i(!1)},className:"button is-warning"},"Annuler"))))):s.a.createElement("div",{className:"block"},s.a.createElement("button",{className:"button is-medium is-info ",onClick:function(){i(!0)}},"Cr\xe9er un processus")),s.a.createElement("div",null,a&&a.length>0?a.map((function(e){return s.a.createElement(q,{key:Object(P.a)(),process:e})})):s.a.createElement("div",null,s.a.createElement("p",{className:"is-size-3"},"Aucun processus charg\xe9")))))))},B=a(20),W=a.n(B),J=(a(43),a(36)),Y=a(78),Q=a.n(Y),X=(a(74),a(75),function(e){var t=e.limitDate,a=Object(n.useState)(""),r=Object(F.a)(a,2),c=r[0],l=r[1],o=Object(n.useState)("has-text-black"),i=Object(F.a)(o,2),u=i[0],m=i[1];return Object(n.useEffect)((function(){!function(){var e=new Date,a=new Date(t),n=new Date(e.getFullYear(),e.getMonth(),e.getDate()+2,23,59,59);e>a?(l("Date limite d\xe9pass\xe9e - "),m("has-text-danger")):e<a&&a<n&&(l("T\xe2che urgente - "),m("has-text-primary"))}()}),[]),s.a.createElement("div",{className:"block is-size-7"},s.a.createElement("p",{className:u},c," ",s.a.createElement(Q.a,{locale:"fr",date:t,format:"LLLL"})))}),Z=function(e){var t=Object(U.a)({},e).task,a=Object(u.b)(),r=Object(n.useState)(!1),c=Object(F.a)(r,2),o=c[0],i=c[1],m=Object(n.useState)(t.content),p=Object(F.a)(m,2),d=p[0],b=p[1],f=Object(n.useState)(t.limitDate?new Date(t.limitDate):null),E=Object(F.a)(f,2),v=E[0],h=E[1];return s.a.createElement("div",{className:"box"},o?s.a.createElement("div",null,s.a.createElement("form",{onSubmit:function(e){e.preventDefault(),a(w({limitDate:v,content:d,taskToUpdateId:t._id}))}},s.a.createElement("div",{className:"field"},s.a.createElement("label",{htmlFor:"content"},"Contenu"),s.a.createElement("p",{className:"control"},s.a.createElement("textarea",{className:"textarea is-info",type:"text",name:"content",placeholder:"Contenu",value:d,onChange:function(e){b(e.target.value)},required:!0}))),s.a.createElement("div",{className:"field"},s.a.createElement(W.a,{locale:"fr",selected:v,onChange:function(e){return h(e)},dateFormatCalendar:"MMM yyyy",showMonthDropdown:!0,useFullMonthInDropdown:!0,closeOnScroll:!0,isClearable:!0,placeholderText:"Date limite",dateFormat:"dd/MM/yyyy HH:mm",className:"blue-border input control is-info",showTimeInput:!0})),s.a.createElement("div",{className:"buttons"},s.a.createElement("button",{className:"button is-small is-info",type:"submit"},"Modifier"),s.a.createElement("button",{className:"button is-small is-warning",onClick:function(){i(!1)}},"Annuler")))):s.a.createElement(n.Fragment,null,s.a.createElement("div",{className:"block"},t.limitDate&&s.a.createElement(X,{limitDate:t.limitDate})),s.a.createElement("div",{className:"block"},s.a.createElement("div",{className:"content"},s.a.createElement(l.b,{to:"/task/".concat(t._id)},s.a.createElement("p",null,t.content," ",s.a.createElement("span",null,t.isCompositeTask&&" (+)")))),s.a.createElement("div",{className:"buttons"},t.isDone?s.a.createElement("button",{className:"button is-small is-primary",onClick:function(){a(C(t._id))}},"Termin\xe9e"):s.a.createElement("button",{className:"button is-small is-info",onClick:function(){a(S(t._id))}},"En cours"),!t.isDone&&s.a.createElement("button",{className:"button is-small is-warning",onClick:function(){i(!0)}},"Modifier"),s.a.createElement("button",{className:"button is-small is-danger",onClick:function(){a(x(t._id))}},"Supprimer")))))},$=function(){var e=Object(u.c)((function(e){return e.user})),t=e.loading_partial,a=e.tasks,r=Object(u.b)(),c=Object(n.useState)(!1),l=Object(F.a)(c,2),o=l[0],i=l[1],m=Object(n.useState)(""),p=Object(F.a)(m,2),d=p[0],b=p[1],v=Object(n.useState)(null),O=Object(F.a)(v,2),g=O[0],k=O[1];Object(B.registerLocale)("fr",J.a),Object(n.useEffect)((function(){r(function(){var e=Object(E.a)(f.a.mark((function e(t){var a,n,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(j(!0)),e.next=4,h.a.get("/api/tasks/get_all_tasks");case 4:a=e.sent,n=a.data.tasks,s=a.data.msg,t({type:"LOAD_TASKS",payload:{tasks:n,msg:s}}),t(j(!1)),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),t(M(e.t0.response&&e.t0.response.data&&404!==e.t0.response.status&&e.t0.response.data.error_msg?e.t0.response.data.error_msg:["Oops, une erreur inattendue s'est produite"])),t(j(!1));case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}())}),[]);return s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column is-three-fifths is-offset-one-fifth"},t?s.a.createElement(K,null):s.a.createElement(n.Fragment,null,s.a.createElement("div",{className:"block"},o?s.a.createElement("div",{className:"block"},s.a.createElement("form",{className:"my-5",onSubmit:function(e){var t;e.preventDefault(),d.length>280&&r(M("Le contenu ne peut comporter plus de 280 caract\xe8res")),d.length<3&&r(M("Le contenu doit comporter au moins 3 caract\xe8res")),r((t={content:d,limitDate:g},function(){var e=Object(E.a)(f.a.mark((function e(a){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a(j(!0)),e.next=4,h.a.post("/api/tasks/new_task_simple",t,N);case 4:n=e.sent,a({type:"NEW_TASK_ADDED",payload:n.data}),a(j(!1)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),a(M(e.t0.response&&e.t0.response.data&&404!==e.t0.response.status&&e.t0.response.data.error_msg?e.t0.response.data.error_msg:["Oops, une erreur inattendue s'est produite"])),a(j(!1));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}())),i(!1),b(""),k()}},s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Nouvelle t\xe2che:"),s.a.createElement("p",{className:"control"},s.a.createElement("textarea",{className:"textarea is-info",type:"text",name:"content",placeholder:"Contenu",value:d,onChange:function(e){b(e.target.value)},required:!0}))),s.a.createElement("div",{className:"field"},s.a.createElement(W.a,{locale:"fr",selected:g,onChange:function(e){return k(e)},dateFormatCalendar:"MMM yyyy",showMonthDropdown:!0,useFullMonthInDropdown:!0,closeOnScroll:!0,isClearable:!0,placeholderText:"Date limite",dateFormat:"dd/MM/yyyy",className:"blue-border input control is-info",showTimeInput:!0})),s.a.createElement("div",{className:"buttons"},s.a.createElement("button",{className:"button is-small is-info",type:"submit"},"Ajouter"),s.a.createElement("button",{className:"button is-small is-light",onClick:function(){i(!1)}},"Annuler")))):s.a.createElement("div",{className:"block"},s.a.createElement("button",{className:"button is-medium is-info mt-5",onClick:function(){i(!0)}},"Ajouter une t\xe2che")),s.a.createElement("div",{className:"block"},a&&a.length>0?a.map((function(e){return s.a.createElement(Z,{key:Object(P.a)(),task:e})})):s.a.createElement("div",null,s.a.createElement("p",{className:"is-size-3"},"Aucune t\xe2che charg\xe9e")))))))},ee=function(e){var t=Object(U.a)({},e).collection;return s.a.createElement("div",{className:"block my-1 is-size-6"},s.a.createElement(l.b,{className:"has-text-weight-medium",to:"/collection/".concat(t._id)},t.title))},te=function(){var e=Object(u.c)((function(e){return e.user})),t=e.loading_partial,a=e.collections,r=Object(u.b)();Object(n.useEffect)((function(){r(D())}),[]);var c=Object(n.useState)(!1),l=Object(F.a)(c,2),o=l[0],i=l[1],m=Object(n.useState)({title:"",description:""}),p=Object(F.a)(m,2),d=p[0],b=p[1],v=function(e){b(Object(U.a)(Object(U.a)({},d),{},Object(H.a)({},e.target.name,e.target.value)))},h=function(){var e=Object(E.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault();try{r(g(!0)),r(T({title:d.title,description:d.description})),i(!1),b({title:"",description:""}),r(g(!1))}catch(a){r(M([a.response.data.error_msg])),r(g(!1))}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return s.a.createElement("div",{className:"columns is-mobile"},s.a.createElement("div",{className:"column is-three-fifths is-offset-one-fifth"},t?s.a.createElement(K,null):s.a.createElement(n.Fragment,null,s.a.createElement("div",{className:"block"},o?s.a.createElement("div",{className:"block"},s.a.createElement("form",{className:"my-5",onSubmit:h},s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Titre"),s.a.createElement("p",{className:"control"},s.a.createElement("input",{className:"input is-info",type:"text",onChange:v,value:d.title,placeholder:"Titre...",name:"title"}))),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Description"),s.a.createElement("p",{className:"control"},s.a.createElement("textarea",{className:"textarea is-info",onChange:v,value:d.description,placeholder:"Description...",name:"description"}))),s.a.createElement("div",{className:"buttons"},s.a.createElement("button",{className:"button is-small is-info",type:"submit"},"Valider"),s.a.createElement("button",{className:"button is-small is-warning",onClick:function(){i(!1)}},"Annuler")))):s.a.createElement("div",{className:"block"},s.a.createElement("button",{className:"button is-medium is-info mt-5",onClick:function(){i(!0)}},"Ajouter une collection")),s.a.createElement("div",{className:"block"},a&&a.length>0?a.map((function(e){return s.a.createElement(ee,{key:Object(P.a)(),collection:e})})):s.a.createElement("div",null,s.a.createElement("p",{className:"is-size-3"},"Aucune collection charg\xe9e")))))))},ae=function(e){return s.a.createElement("div",{className:"notification is-danger is-light"},s.a.createElement("button",{className:"delete",onClick:e.deleteFunction}),s.a.createElement("p",{className:"is-small"},e.error_msg.error_msg))},ne=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.user})).messages;return s.a.createElement("div",null,t.length>0&&s.a.createElement("button",{onClick:function(){e((function(e){e({type:"DELETE_ALL_MSG"})}))}},"Supprimer tous les messages"),t.map((function(t){return s.a.createElement(ae,{key:t._id,message:t,deleteFunction:function(){var a;e((a=t._id,function(e){e({type:"DELETE_INDIVIDUAL_MSG",payload:a})}))}})})))},se=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.user})).error_msgs;return s.a.createElement("div",{className:"block"},t.map((function(t){return s.a.createElement(ae,{key:t._id,error_msg:t,deleteFunction:function(){var a;e((a=t._id,function(e){e({type:"DELETE_INDIVIDUAL_ERROR_MSG",payload:a})}))}})})),t.length>0&&s.a.createElement("button",{className:"button is-danger is-small",onClick:function(){e((function(e){e({type:"DELETE_ALL_ERROR_MSG"})}))}},"Supprimer tous les messages d'erreurs"))},re=function(){var e=Object(u.c)((function(e){return e.user})),t=e.loading,a=e.mode,r=Object(u.b)();Object(n.useEffect)((function(){r(g(!1))}),[]);return s.a.createElement("div",null,t?s.a.createElement(L,null):s.a.createElement(n.Fragment,null,s.a.createElement(R,null),s.a.createElement("div",{className:"columns my-0 py-0"},s.a.createElement("div",{className:"column is-half is-offset-one-quarter"},s.a.createElement(ne,null),s.a.createElement(se,null))),function(e){switch(e){case"TASKS":return s.a.createElement($,null);case"PROCESSES":return s.a.createElement(V,null);case"COLLECTIONS":return s.a.createElement(te,null);case"NOTES":return s.a.createElement(z,null)}}(a)))},ce=function(e){var t=Object(u.c)((function(e){return e.user})).isAuthenticated,a=Object(u.b)();Object(n.useEffect)((function(){t&&e.history.push("/")}),[t,e.history]);var r=Object(n.useState)({email:"",password:""}),c=Object(F.a)(r,2),o=c[0],i=c[1],m=o.email,p=o.password,d=function(e){i(Object(U.a)(Object(U.a)({},o),{},Object(H.a)({},e.target.name,e.target.value)))};return s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column is-half is-offset-one-quarter"},s.a.createElement("div",{className:"hero-body"},s.a.createElement("p",{className:"title"},"Bienvenue sur Projet \xc9l\xe9phant"),s.a.createElement("p",{className:"subtitle"},s.a.createElement("strong",null,"Projet \xc9l\xe9phant")," est un site web de d\xe9monstration par"," ",s.a.createElement("a",{className:"has-text-weight-medium has-text-black-bis",href:"https://audelcroix.com"},"Aur\xe9lien Delcroix")),s.a.createElement("p",{className:"subtitle"},"Connexion")),s.a.createElement("div",{className:"column is-full"},s.a.createElement(ne,null),s.a.createElement(se,null)),s.a.createElement("div",{className:"box"},s.a.createElement("div",{className:"block mt-5"},s.a.createElement("form",{onSubmit:function(e){var t;e.preventDefault(),m?!function(e){return/\S+@\S+\.\S+/.test(e)}(m)?a(M(["Cette adresse email est invalide"])):a(p?(t={email:m,password:p},function(){var e=Object(E.a)(f.a.mark((function e(a){var n,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a(g(!0)),e.next=4,h.a.post("/api/users/login",t,N);case 4:n=e.sent,s=n.data.token,O(s),a({type:"LOGIN_SUCCESS",payload:n.data}),a(D()),a(g(!1)),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),a(M(e.t0.response&&e.t0.response.data&&404!==e.t0.response.status&&e.t0.response.data.error_msg?e.t0.response.data.error_msg:["Oops, une erreur inattendue s'est produite"])),a(g(!1));case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}()):M(["Veuillez entrer un mot de passe"])):a(M(["Veuillez entrer un email"]))}},s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"E-Mail"),s.a.createElement("p",{className:"control has-icons-left"},s.a.createElement("input",{type:"email",name:"email",value:m,onChange:d,className:"input is-medium is-info",id:"loginFormEmail",placeholder:"E-Mail"}),s.a.createElement("span",{className:"material-icons icon is-small is-left"},"email"))),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Mot de passe"),s.a.createElement("p",{className:"control has-icons-left"},s.a.createElement("input",{type:"password",name:"password",value:p,onChange:d,className:"input is-medium is-info",id:"loginFormPassword",placeholder:"Mot de passe"}),s.a.createElement("span",{className:"material-icons icon is-small is-left"},"lock"))),s.a.createElement("div",{className:"control"},s.a.createElement("button",{type:"submit",className:"button is-link"},"Connexion")))),s.a.createElement(l.b,{to:"/register",className:"has-text-weight-medium"},"Inscription"))))},le=function(e){var t=Object(u.c)((function(e){return e.user})).isAuthenticated,a=Object(u.b)();Object(n.useEffect)((function(){t&&e.history.push("/")}),[t,e.history]);var r=Object(n.useState)({password:"",passwordConfirm:"",email:""}),c=Object(F.a)(r,2),o=c[0],i=c[1],m=function(e){i(Object(U.a)(Object(U.a)({},o),{},Object(H.a)({},e.target.name,e.target.value)))};return s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column is-half is-offset-one-quarter"},s.a.createElement("div",{className:"hero-body"},s.a.createElement("p",{className:"title"},"Bienvenue sur Projet \xc9l\xe9phant"),s.a.createElement("p",{className:"subtitle"},s.a.createElement("strong",null,"Projet \xc9l\xe9phant")," est un site web de d\xe9monstration par"," ",s.a.createElement("a",{className:"has-text-weight-medium has-text-black-bis",href:"https://audelcroix.com"},"Aur\xe9lien Delcroix")),s.a.createElement("p",{className:"subtitle"},"Inscription")),s.a.createElement("div",{className:"column is-full"},s.a.createElement(ne,null),s.a.createElement(se,null)),s.a.createElement("div",{className:"box"},s.a.createElement("div",{className:"block mt-5"},s.a.createElement("form",{onSubmit:function(e){var t,n;e.preventDefault(),n=o.email,/\S+@\S+\.\S+/.test(n)?o.password.length<8?a(M(["Le mot de passe doit comporter au moins 8 caract\xe8res"])):o.password!==o.passwordConfirm?a(M(["Les deux mots de passe doivent \xeatre les m\xeames"])):a((t={password:o.password,email:o.email},function(){var e=Object(E.a)(f.a.mark((function e(a){var n,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a(g(!0)),e.next=4,h.a.post("/api/users/register",t,N);case 4:n=e.sent,s=n.data.token,O(s),a({type:"LOGIN_SUCCESS",payload:n.data}),a(D()),a(g(!1)),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),a(M(e.t0.response&&e.t0.response.data&&404!==e.t0.response.status&&e.t0.response.data.error_msg?e.t0.response.data.error_msg:["Oops, une erreur inattendue s'est produite"])),a(g(!1));case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}())):a(M(["Email invalide","grudu"]))}},s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"E-Mail"),s.a.createElement("p",{className:"control has-icons-left"},s.a.createElement("input",{placeholder:"E-Mail",className:"input is-medium is-info",type:"email",value:o.email,onChange:m,name:"email"}),s.a.createElement("span",{className:"material-icons icon is-small is-left"},"email"))),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Mot de passe"),s.a.createElement("p",{className:"control has-icons-left"},s.a.createElement("input",{placeholder:"Mot de passe",className:"input is-medium is-info",type:"password",value:o.password,onChange:m,name:"password"}),s.a.createElement("span",{className:"material-icons icon is-small is-left"},"lock"))),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Confirmation du mot de passe"),s.a.createElement("p",{className:"control has-icons-left"},s.a.createElement("input",{placeholder:"Confirmation du mot de passe",className:"input is-medium is-info",type:"password",value:o.passwordConfirm,onChange:m,name:"passwordConfirm"}),s.a.createElement("span",{className:"material-icons icon is-small is-left"},"lock"))),s.a.createElement("div",{className:"control"},s.a.createElement("button",{type:"submit",className:"button is-link"},"Cr\xe9er mon profil")))),s.a.createElement(l.b,{to:"/login",className:"has-text-weight-medium"},"Connexion"))))},oe=function(e){Object(B.registerLocale)("fr",J.a);var t=Object(U.a)({},e).subtask,a=Object(u.b)(),r=Object(n.useState)(t),c=Object(F.a)(r,2),l=c[0],o=c[1],i=Object(n.useState)(!1),m=Object(F.a)(i,2),p=m[0],d=m[1],b=Object(n.useState)(t.content),v=Object(F.a)(b,2),O=v[0],g=v[1],k=Object(n.useState)(t.limitDate?new Date(t.limitDate):null),_=Object(F.a)(k,2),y=_[0],x=_[1],S=Object(n.useState)(!1),C=Object(F.a)(S,2),w=C[0],D=C[1],T=function(){var e=Object(E.a)(f.a.mark((function e(n){var s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n.preventDefault(),O.length>280&&a(M("Le contenu ne peut comporter plus de 280 caract\xe8res")),O.length<3&&a(M("Le contenu doit comporter au moins 3 caract\xe8res")),e.next=6,h.a.patch("http://localhost:5000/api/tasks/edit_subtask/".concat(t._id),{content:O,limitDate:y},N);case 6:s=e.sent,o(s.data.updatedSubtask),D(!1),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(0),a(M([e.t0.response.data.error_msg])),g(l.content),x(t.limitDate?new Date(t.limitDate):null);case 16:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}();return s.a.createElement("div",{className:"box"},p?s.a.createElement("div",null,s.a.createElement("p",null,"Mise \xe0 jour en cours...")):w?s.a.createElement("div",null,s.a.createElement("form",{onSubmit:T},s.a.createElement("div",{className:"field"},s.a.createElement("label",{htmlFor:"content"},"Contenu"),s.a.createElement("p",{className:"control"},s.a.createElement("textarea",{className:"textarea is-info",type:"text",name:"content",placeholder:"Contenu",value:O,onChange:function(e){g(e.target.value)},required:!0}))),s.a.createElement("div",{className:"field"},s.a.createElement(W.a,{locale:"fr",selected:y,onChange:function(e){return x(e)},dateFormatCalendar:"MMM yyyy",showMonthDropdown:!0,useFullMonthInDropdown:!0,closeOnScroll:!0,isClearable:!0,placeholderText:"Date limite",dateFormat:"dd/MM/yyyy HH:mm",className:"blue-border input control is-info",showTimeInput:!0})),s.a.createElement("div",{className:"buttons"},s.a.createElement("button",{className:"button is-small is-info",type:"submit"},"Modifier"),s.a.createElement("button",{className:"button is-small is-warning",onClick:function(){D(!1),g(l.content),x(t.limitDate?new Date(t.limitDate):null)}},"Annuler")))):s.a.createElement("div",{className:"block"},s.a.createElement("div",{className:"content"},l.limitDate&&s.a.createElement(X,{limitDate:l.limitDate}),s.a.createElement("p",null,l.content)),s.a.createElement("div",{className:"buttons"},s.a.createElement("button",{className:l.isDone?"button is-small is-primary":"button is-small is-info",onClick:function(){try{d(!0),l.isDone?a((e=t._id,function(){var t=Object(E.a)(f.a.mark((function t(a){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.a.patch("/api/tasks/unfinish_subtask/".concat(e),N);case 3:return n=t.sent,t.abrupt("return",{success:!0,msg:n.data.msg,unfinishedSubtask:n.data.unfinishedSubtask});case 7:return t.prev=7,t.t0=t.catch(0),a(j(!1)),t.abrupt("return",{success:!1,error_msg:t.t0.response.data.error_msg});case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}())).then((function(e){e&&(e.success?o(e.unfinishedSubtask):a(M([e.response.data.error_msg])))})):a((n=t._id,function(){var e=Object(E.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.patch("/api/tasks/finish_subtask/".concat(n),N);case 3:return a=e.sent,e.abrupt("return",{success:!0,msg:a.data.msg,finishedSubtask:a.data.finishedSubtask});case 7:return e.prev=7,e.t0=e.catch(0),t(M(e.t0.response&&e.t0.response.data&&404!==e.t0.response.status&&e.t0.response.data.error_msg?e.t0.response.data.error_msg:["Oops, une erreur inattendue s'est produite"])),t(j(!1)),e.abrupt("return",{success:!1,error_msg:e.t0.response.data.error_msg});case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}())).then((function(e){e&&(e.success?o(e.finishedSubtask):a(M([e.response.data.error_msg])))}))}catch(s){a(M([s.response.data.error_msg]))}finally{d(!1)}var e,n}},l.isDone?"Termin\xe9e":"En cours"),!l.isDone&&s.a.createElement("button",{className:"button is-small is-warning",onClick:function(){D(!0)}},"Modifier"),s.a.createElement("button",{className:"button is-small is-danger",onClick:function(){d(!0),e.deleteFunction(t._id)}},"Supprimer")," ")))},ie=function(e){var t=Object(u.b)(),a=e.origin,n=e.targetDocumentId,r=e.currentCollections,c=function(){var s=Object(E.a)(f.a.mark((function s(r){var c,l;return f.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:s.prev=0,s.t0=a,s.next="processes"===s.t0?4:"tasks"===s.t0?6:"notes"===s.t0?8:10;break;case 4:return c={processId:n,collectionId:r},s.abrupt("break",11);case 6:return c={taskId:n,collectionId:r},s.abrupt("break",11);case 8:return c={noteId:n,collectionId:r},s.abrupt("break",11);case 10:return s.abrupt("break",11);case 11:return s.next=13,h.a.patch("http://localhost:5000/api/".concat(a,"/remove_from_collection"),c,N);case 13:l=s.sent,t(A(l.data.updatedCollection)),e.removeCollectionFromMotherProcess(l.data.updatedCollection),s.next=21;break;case 18:s.prev=18,s.t1=s.catch(0),t(M([s.t1.response.data.error_msg]));case 21:case"end":return s.stop()}}),s,null,[[0,18]])})));return function(e){return s.apply(this,arguments)}}();return s.a.createElement("div",{className:"block"},s.a.createElement("h2",{className:"subtitle"},"Collections:"),r.length>0?r.map((function(e){return s.a.createElement("div",{key:Object(P.a)()},s.a.createElement(ee,{collection:e}),s.a.createElement("small",{className:"is-size-7 is-clickable",onClick:function(){c(e._id)}},"Supprimer de cette collection"))})):s.a.createElement("p",{className:"is-size-4 has-text-centered has-text-weight-semibold"},"Ce document n'appartient \xe0 aucune collection"))},ue=function(e){var t=Object(u.b)(),a=Object(u.c)((function(e){return e.user})).collections,r=Object(n.useState)(a[0]?a[0]._id:null),c=Object(F.a)(r,2),l=c[0],o=c[1],i=function(){var n=Object(E.a)(f.a.mark((function n(s){var r,c,o;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:s.preventDefault(),n.prev=1,r=a.find((function(e){return e._id===l})),n.t0=e.origin,n.next="processes"===n.t0?6:"tasks"===n.t0?8:"notes"===n.t0?10:12;break;case 6:return c={processId:e.targetDocumentId,collectionId:r._id},n.abrupt("break",13);case 8:return c={taskId:e.targetDocumentId,collectionId:r._id},n.abrupt("break",13);case 10:return c={noteId:e.targetDocumentId,collectionId:r._id},n.abrupt("break",13);case 12:return n.abrupt("break",13);case 13:return n.next=15,h.a.patch("http://localhost:5000/api/".concat(e.origin,"/add_to_collection"),c,N);case 15:o=n.sent,t(I(o.data.updatedCollection)),e.addCollectionToMotherProcess(o.data.updatedCollection),e.closeAddToCollectionForm(),n.next=24;break;case 21:n.prev=21,n.t1=n.catch(1),t(M([n.t1.response.data.error_msg]));case 24:case"end":return n.stop()}}),n,null,[[1,21]])})));return function(e){return n.apply(this,arguments)}}();return s.a.createElement("div",{className:"block"},a.length>0?s.a.createElement("form",{onSubmit:i},s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Collections:"),s.a.createElement("div",{className:"select is-info"},s.a.createElement("select",{value:l,onChange:function(e){o(e.target.value)}},a.map((function(t,a){return t[e.origin].some((function(t){return t===e.targetDocumentId})),!t[e.origin].some((function(t){return t===e.targetDocumentId}))&&s.a.createElement("option",{value:t._id,key:a},t.title)}))))),s.a.createElement("div",{className:"buttons"},s.a.createElement("button",{className:"button is-small is-info",type:"submit"},"Ajouter \xe0 cette collection"),s.a.createElement("button",{className:"button is-small is-warning",onClick:function(){e.closeAddToCollectionForm()}},"Annuler"))):s.a.createElement("p",{className:"is-size-4 has-text-centered has-text-weight-semibold"},"Aucune collection \xe0 laquelle ajouter ce document"))},me=function(e){Object(B.registerLocale)("fr",J.a);var t=Object(u.c)((function(e){return e.user})).loading,a=Object(u.b)(),r=Object(n.useState)(null),c=Object(F.a)(r,2),o=c[0],i=c[1],m=Object(n.useState)(!1),p=Object(F.a)(m,2),b=p[0],v=p[1],O=Object(n.useState)(""),k=Object(F.a)(O,2),_=k[0],y=k[1],D=Object(n.useState)(null),T=Object(F.a)(D,2),A=T[0],I=T[1],R=Object(n.useState)(!1),G=Object(F.a)(R,2),K=G[0],z=G[1],H=Object(n.useState)(!1),q=Object(F.a)(H,2),V=(q[0],q[1]),Y=Object(n.useState)(!1),Q=Object(F.a)(Y,2),Z=(Q[0],Q[1]),$=Object(n.useState)(!1),ee=Object(F.a)($,2),te=ee[0],ae=ee[1],re=Object(n.useState)(""),ce=Object(F.a)(re,2),le=ce[0],me=ce[1],pe=Object(n.useState)(),de=Object(F.a)(pe,2),be=de[0],fe=de[1],Ee=Object(n.useState)([]),ve=Object(F.a)(Ee,2),he=ve[0],Oe=ve[1],Ne=function(e){var t=new Date,a=new Date(e.limitDate);t.getDate()+2>=a.getDate()?V(!0):V(!1),a.setHours(0,0,0,0)<=t.setHours(0,0,0,0)?Z(!0):Z(!1)};Object(n.useEffect)((function(){(function(){var t=Object(E.a)(f.a.mark((function t(){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a(g(!0)),t.next=4,h.a.get("http://localhost:5000/api/tasks/get_task_complete/".concat(e.match.params.taskId));case 4:n=t.sent,i(n.data.task),n.data.task.isDone||Ne(n.data.task),y(n.data.task.content),I(n.data.task.limitDate&&new Date(n.data.task.limitDate)),Oe(n.data.task.subtasks),a(g(!1)),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(0),a(M(t.t0.response&&t.t0.response.data.error_msg?[t.t0.response.data.error_msg]:["Nous sommes d\xe9sol\xe9s, une erreur inattendue s'est produite lors du chargement"])),e.history.push("/");case 17:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}})()()}),[]);var ge=function(e){var t;a((t=e,function(){var e=Object(E.a)(f.a.mark((function e(a){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a(j(!0)),e.next=4,h.a.delete("/api/tasks/delete_subtask/".concat(t),N);case 4:return n=e.sent,a({type:"DELETE_SUBTASK",payload:n.data}),a(j(!1)),e.abrupt("return",{success:!0,msg:n.data.msg});case 10:return e.prev=10,e.t0=e.catch(0),a(M(e.t0.response&&e.t0.response.data&&404!==e.t0.response.status&&e.t0.response.data.error_msg?e.t0.response.data.error_msg:["Oops, une erreur inattendue s'est produite"])),a(j(!1)),e.abrupt("return",{success:!1,error_msg:e.t0.response.data.error_msg});case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}())).then((function(t){t&&!t.success?a(M([t.response.data.error_msg])):t&&t.success&&Oe(he.filter((function(t){return t._id!==e})))}))};return s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column is-three-fifths is-offset-one-fifth"},t?s.a.createElement(L,null):o?s.a.createElement(n.Fragment,null,s.a.createElement("div",{className:"block mt-5"},s.a.createElement(l.b,{to:"/",className:"has-text-weight-medium"},"Retour aux t\xe2ches")),s.a.createElement("div",{className:"columns my-0 py-0"},s.a.createElement("div",{className:"column is-half is-offset-one-quarter"},s.a.createElement(ne,null),s.a.createElement(se,null))),b?s.a.createElement("div",{className:"block"},s.a.createElement("form",{onSubmit:function(e){try{a(w({limitDate:A,content:_,taskToUpdateId:o._id},!0)).then((function(e){e&&e.updatedTask&&(i(e.updatedTask),o.isDone||Ne(e.updatedTask))})),v(!1)}catch(t){a(M([t.response.data.error_msg]))}e.preventDefault()}},s.a.createElement("div",{className:"field"},s.a.createElement("label",{htmlFor:"content"},"Contenu"),s.a.createElement("p",{className:"control"},s.a.createElement("textarea",{className:"textarea is-info",type:"text",name:"content",placeholder:"Contenu",value:_,onChange:function(e){y(e.target.value)},required:!0}))),s.a.createElement("div",{className:"field"},s.a.createElement(W.a,{locale:"fr",selected:A,onChange:function(e){return I(e)},dateFormatCalendar:"MMM yyyy",showMonthDropdown:!0,useFullMonthInDropdown:!0,closeOnScroll:!0,isClearable:!0,placeholderText:"Date limite",dateFormat:"dd/MM/yyyy HH:mm",className:"blue-border input control is-info",showTimeInput:!0})),s.a.createElement("div",{className:"buttons"},s.a.createElement("button",{className:"button is-small is-info",type:"submit"},"Modifier"),s.a.createElement("button",{className:"button is-small is-warning",onClick:function(){v(!1)}},"Annuler")))):s.a.createElement("div",{className:"block"},s.a.createElement("div",{className:"block"},o.limitDate&&s.a.createElement(X,{limitDate:o.limitDate})),s.a.createElement("div",{className:"content"},s.a.createElement("p",null,o.content)),s.a.createElement("div",{className:"buttons"},o.isDone?s.a.createElement("button",{className:"button is-small is-primary",onClick:function(){a(C(o._id,!0)).then((function(e){e.unfinishedTask&&(i(e.unfinishedTask),Ne(e.unfinishedTask))}))}},"Termin\xe9e"):s.a.createElement("button",{className:"button is-small is-info",onClick:function(){a(S(o._id,!0)).then((function(e){e.finishedTask&&(i(e.finishedTask),Ne(e.finishedTask))}))}},"En cours"),!o.isDone&&s.a.createElement("button",{className:"button is-small is-warning",onClick:function(){v(!0)}},"Modifier"),s.a.createElement("button",{className:"button is-small is-danger",onClick:function(){a(x(o._id,!0)).then((function(t){t.success&&e.history.push("/")}))}},"Supprimer"))),!te&&s.a.createElement("div",{className:"block"},s.a.createElement("button",{className:"button is-small is-info",onClick:function(){ae(!0)}},"Ajouter une sous-t\xe2che")),te&&s.a.createElement("div",{className:"block"},s.a.createElement("form",{onSubmit:function(e){var t,n;e.preventDefault(),le.length>280&&a(M("Le contenu ne peut comporter plus de 280 caract\xe8res")),le.length<3&&a(M("Le contenu doit comporter au moins 3 caract\xe8res")),a((t={content:le,limitDate:be},n=o._id,function(){var e=Object(E.a)(f.a.mark((function e(a){var s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a(g(!0)),e.next=4,h.a.post("/api/tasks/add_subtask_to_task/".concat(n),t,N);case 4:return s=e.sent,a({type:"ADD_SUBTASK",payload:s.data}),a(g(!1)),e.abrupt("return",s);case 10:e.prev=10,e.t0=e.catch(0),a(M(e.t0.response&&e.t0.response.data&&404!==e.t0.response.status&&e.t0.response.data.error_msg?e.t0.response.data.error_msg:["Oops, une erreur inattendue s'est produite"])),a(g(!1));case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}())).then((function(e){me(""),fe(),e.data&&e.data.newSubTask&&(Oe([].concat(Object(d.a)(he),[e.data.newSubTask])),ae(!1))}))}},s.a.createElement("div",{className:"field"},s.a.createElement("label",{htmlFor:"content"},"Contenu"),s.a.createElement("p",{className:"control"},s.a.createElement("textarea",{className:"textarea is-info",type:"text",name:"content",placeholder:"Contenu",value:le,onChange:function(e){me(e.target.value)},required:!0}))),s.a.createElement("div",{className:"field"},s.a.createElement(W.a,{locale:"fr",selected:be,onChange:function(e){return fe(e)},dateFormatCalendar:"MMM yyyy",showMonthDropdown:!0,useFullMonthInDropdown:!0,closeOnScroll:!0,isClearable:!0,placeholderText:"Date limite",dateFormat:"dd/MM/yyyy HH:mm",className:"blue-border input control is-info",showTimeInput:!0})),s.a.createElement("div",{className:"buttons"},s.a.createElement("button",{className:"button is-small is-info",type:"submit"},"Ajouter"),s.a.createElement("button",{className:"button is-small is-light",onClick:function(){ae(!1)}},"Annuler")))),s.a.createElement("div",{className:"block"},he.length>0?s.a.createElement("ul",null,he.map((function(e){return s.a.createElement(oe,{key:Object(P.a)(),subtask:e,deleteFunction:ge})}))):s.a.createElement("p",{className:"is-size-6  has-text-weight-semibold"},s.a.createElement("small",null,"Aucune sous-t\xe2che"))),s.a.createElement(ie,{origin:"tasks",targetDocumentId:o._id,currentCollections:o.collections,removeCollectionFromMotherProcess:function(e){i(Object(U.a)(Object(U.a)({},o),{},{collections:o.collections.filter((function(t){return t._id!==e._id}))}))}}),K?s.a.createElement(ue,{origin:"tasks",targetDocumentId:o._id,addCollectionToMotherProcess:function(e){i(Object(U.a)(Object(U.a)({},o),{},{collections:[].concat(Object(d.a)(o.collections),[e])}))},closeAddToCollectionForm:function(){z(!1)}}):s.a.createElement("div",{className:"block"},s.a.createElement("button",{className:"button is-small is-info",onClick:function(){z(!0)}},"Ajouter \xe0 une collection"))):s.a.createElement("p",{className:"is-size-4 has-text-centered has-text-weight-semibold"},"Aucune t\xe2che charg\xe9e")))},pe=function(e){var t=e.step,a=e.deleteFunction,r=e.updateFunction,c=Object(n.useState)(!1),l=Object(F.a)(c,2),o=l[0],i=l[1],u=Object(n.useState)({content:t.content}),m=Object(F.a)(u,2),p=m[0],d=m[1];return s.a.createElement("div",{className:"block"},o?s.a.createElement("div",{className:"box"},s.a.createElement("form",{onSubmit:function(e){e.preventDefault(),r({stepId:t._id,content:p.content}),i(!1)}},s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Contenu"),s.a.createElement("p",{className:"control"},s.a.createElement("input",{className:"input is-small is-info",type:"text",value:p.content,name:"content",placeholder:"Contenu",onChange:function(e){d(Object(U.a)(Object(U.a)({},p),{},Object(H.a)({},e.target.name,e.target.value)))}}))),s.a.createElement("div",{className:"field is-grouped"},s.a.createElement("div",{className:"control"},s.a.createElement("button",{className:"button is-warning is-small",type:"submit"},"Modifier")),s.a.createElement("div",{className:"control"},s.a.createElement("button",{className:"button is-info is-small",onClick:function(){return i(!1)}},"Annuler"))))):s.a.createElement("div",{className:"box"},s.a.createElement("p",{className:"has-text-weight-normal mb-2"},t.content),s.a.createElement("div",{className:"buttons"},s.a.createElement("button",{onClick:function(){i(!0)},title:"Modifier",className:"button is-small is-warning"},"Modifier"),s.a.createElement("button",{onClick:function(){a(t._id)},title:"Supprimer",className:"button is-small is-danger"},"Supprimer"))))},de=function(e){var t=Object(u.b)(),a=Object(u.c)((function(e){return e.user})).loading,r=Object(n.useState)(null),c=Object(F.a)(r,2),o=c[0],i=c[1],m=Object(n.useState)([]),p=Object(F.a)(m,2),b=p[0],v=p[1],O=Object(n.useState)(!1),j=Object(F.a)(O,2),k=j[0],_=j[1],y=Object(n.useState)({description:"",title:""}),x=Object(F.a)(y,2),S=x[0],C=x[1],w=Object(n.useState)(!1),D=Object(F.a)(w,2),T=D[0],A=D[1],I=Object(n.useState)(!1),R=Object(F.a)(I,2),G=R[0],K=R[1],z=Object(n.useState)({content:""}),q=Object(F.a)(z,2),V=q[0],B=q[1],W=function(e){C(Object(U.a)(Object(U.a)({},S),{},Object(H.a)({},e.target.name,e.target.value)))},J=function(){var e=Object(E.a)(f.a.mark((function e(a){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,t(g(!0)),e.next=5,h.a.patch("http://localhost:5000/api/processes/edit_process/".concat(o._id),{description:S.description,title:S.title},N).then((function(e){i(e.data.updatedProcess),C({title:e.data.updatedProcess.title,description:e.data.updatedProcess.description}),_(!1)}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),t(M([e.t0.response.data.error_msg]));case 10:return e.prev=10,t(g(!1)),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[1,7,10,13]])})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(E.a)(f.a.mark((function e(a){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,t(g(!0)),e.next=5,h.a.post("http://localhost:5000/api/processes/new_step/".concat(o._id),{content:V.content},N).then((function(e){i(e.data.updatedProcess),v([].concat(Object(d.a)(b),[e.data.newStep])),K(!1),B({content:""})}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),t(M([e.t0.response.data.error_msg]));case 10:return e.prev=10,t(g(!1)),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[1,7,10,13]])})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var a=Object(E.a)(f.a.mark((function a(){return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,h.a.delete("http://localhost:5000/api/processes/delete_process/".concat(o._id));case 3:e.history.push("/"),a.next=9;break;case 6:a.prev=6,a.t0=a.catch(0),t(M([a.t0.response.data.error_msg]));case 9:case"end":return a.stop()}}),a,null,[[0,6]])})));return function(){return a.apply(this,arguments)}}(),X=function(){var e=Object(E.a)(f.a.mark((function e(a){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.delete("http://localhost:5000/api/processes/delete_step/".concat(a));case 3:v(b.filter((function(e){return e._id!==a}))),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),t(M([e.t0.response.data.error_msg]));case 9:return e.prev=9,t(g(!1)),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[0,6,9,12]])})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(E.a)(f.a.mark((function e(a){var n,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(g(!0)),e.prev=1,n=b.findIndex((function(e){return e._id===a.stepId})),e.next=5,h.a.patch("http://localhost:5000/api/processes/edit_step/".concat(a.stepId),{content:a.content},N);case 5:s=e.sent,b[n]=s.data.updatedStep,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t(M([e.t0.response.data.error_msg]));case 12:return e.prev=12,t(g(!1)),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,9,12,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){(function(){var a=Object(E.a)(f.a.mark((function a(){var n;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t(g(!0)),a.next=4,h.a.get("http://localhost:5000/api/processes/get_process_steps/".concat(e.match.params.processId));case 4:n=a.sent,i(n.data.targetProcess),C({description:n.data.targetProcess.description,title:n.data.targetProcess.title}),v(n.data.targetProcess.steps),t(g(!1)),a.next=15;break;case 11:a.prev=11,a.t0=a.catch(0),t(M(a.t0.response&&a.t0.response.data.error_msg?[a.t0.response.data.error_msg]:["Nous sommes d\xe9sol\xe9s, une erreur inattendue s'est produite lors du chargement"])),e.history.push("/");case 15:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(){return a.apply(this,arguments)}})()()}),[]),s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column is-three-fifths is-offset-one-fifth"},a?s.a.createElement(L,null):s.a.createElement(n.Fragment,null,s.a.createElement("div",{className:"block mt-5"},s.a.createElement(l.b,{to:"/",className:"has-text-weight-medium"},"Retour aux processus")),s.a.createElement("div",{className:"columns my-0 py-0"},s.a.createElement("div",{className:"column is-half is-offset-one-quarter"},s.a.createElement(ne,null),s.a.createElement(se,null))),o?s.a.createElement(n.Fragment,null,k?s.a.createElement("div",{className:"block"},s.a.createElement("form",{onSubmit:J},s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Titre"),s.a.createElement("p",{className:"control"},s.a.createElement("input",{type:"text",className:"input is-medium is-info",value:S.title,name:"title",onChange:W}))),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Description"),s.a.createElement("p",{className:"control"},s.a.createElement("textarea",{className:"textarea is-info",value:S.description,name:"description",placeholder:"Description du processus",onChange:W}))),s.a.createElement("div",{className:"buttons"},s.a.createElement("button",{className:"button is-small is-info",type:"submit"},"Valider"),s.a.createElement("button",{className:"button is-small is-warning",onClick:function(){_(!1)}},"Annuler")))):s.a.createElement(n.Fragment,null,s.a.createElement("div",{className:"block"},s.a.createElement("div",{className:"content"},s.a.createElement("h2",{className:"subtitle"},o.title),s.a.createElement("p",{className:""},o.description),s.a.createElement("small",null,o.steps.length," \xe9tape",o.steps.length>1&&"s"))),s.a.createElement("div",{className:"block"},s.a.createElement("div",{className:"buttons"},s.a.createElement("button",{className:"button is-small is-warning",onClick:function(){_(!0),K(!1)}},"Modifier"),!G&&s.a.createElement("button",{className:"button is-small is-info",onClick:function(){K(!0)}},"Ajouter une \xe9tape"),s.a.createElement("button",{className:"button is-small is-danger",onClick:Q},"Supprimer")))),G&&s.a.createElement("div",{className:"block"},s.a.createElement("form",{onSubmit:Y},s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Contenu"),s.a.createElement("p",{className:"control"},s.a.createElement("input",{className:"input is-small is-info",type:"text",value:V.content,name:"content",placeholder:"Contenu",onChange:function(e){B(Object(U.a)(Object(U.a)({},V),{},Object(H.a)({},e.target.name,e.target.value)))}}))),s.a.createElement("div",{className:"buttons"},s.a.createElement("button",{className:"button is-small is-info",type:"submit"},"Valider"),s.a.createElement("button",{className:"button is-small is-warning",onClick:function(){K(!1)}},"Annuler")))),b.length>0?b.map((function(e){return s.a.createElement(pe,{step:e,key:Object(P.a)(),deleteFunction:function(){X(e._id)},updateFunction:Z})})):s.a.createElement("p",{className:"is-size-6 has-text-weight-semibold"},"Ce processus ne comprend aucune \xe9tape"),s.a.createElement(ie,{origin:"processes",targetDocumentId:o._id,currentCollections:o.collections,removeCollectionFromMotherProcess:function(e){i(Object(U.a)(Object(U.a)({},o),{},{collections:o.collections.filter((function(t){return t._id!==e._id}))}))}}),T?s.a.createElement(ue,{origin:"processes",targetDocumentId:o._id,addCollectionToMotherProcess:function(e){i(Object(U.a)(Object(U.a)({},o),{},{collections:[].concat(Object(d.a)(o.collections),[e])}))},closeAddToCollectionForm:function(){A(!1)}}):s.a.createElement("div",{className:"block"},s.a.createElement("button",{className:"button is-small is-info",onClick:function(){A(!0)}},"Ajouter \xe0 une collection"))):s.a.createElement("p",{className:"is-size-4 has-text-centered has-text-weight-semibold"},"Aucun processus charg\xe9"))))},be=function(e){var t=e.match.params.collectionId,a=Object(u.b)(),r=Object(u.c)((function(e){return e.user})).loading,c=Object(n.useState)({}),o=Object(F.a)(c,2),i=o[0],m=o[1],p=Object(n.useState)(!1),b=Object(F.a)(p,2),v=b[0],O=b[1],j=Object(n.useState)({title:"",description:""}),k=Object(F.a)(j,2),_=k[0],y=k[1];Object(n.useEffect)((function(){(function(){var n=Object(E.a)(f.a.mark((function n(){var s;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a(g(!0)),n.next=4,h.a.get("http://localhost:5000/api/collections/get_collection_complete/".concat(t));case 4:s=n.sent,m(s.data.collectionComplete),y({title:s.data.collectionComplete.title,description:s.data.collectionComplete.description}),a(g(!1)),n.next=15;break;case 10:n.prev=10,n.t0=n.catch(0),a(M(n.t0.response&&n.t0.response.data.error_msg?Object(d.a)(n.t0.response.data.error_msg):["Nous sommes d\xe9sol\xe9s, une erreur inattendue s'est produite lors du chargement"])),e.history.push("/"),a(g(!1));case 15:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(){return n.apply(this,arguments)}})()(t)}),[]);var x=function(){var e=Object(E.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,a(g(!0)),e.next=5,h.a.patch("http://localhost:5000/api/collections/update_collection/".concat(i._id),{title:_.title,description:_.description},N);case 5:n=e.sent,m(Object(U.a)(Object(U.a)({},i),{},{title:n.data.updatedCollection.title,description:n.data.updatedCollection.description})),y({title:"",description:""}),O(!1),a(g(!1)),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),a(M([e.t0.response.data.error_msg])),a(g(!1));case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),S=function(e){y(Object(U.a)(Object(U.a)({},_),{},Object(H.a)({},e.target.name,e.target.value)))},C=function(){var t=Object(E.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a(g(!0)),t.next=4,h.a.delete("http://localhost:5000/api/collections/delete_collection/".concat(i._id));case 4:e.history.push("/"),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),a(M([t.t0.response.data.error_msg])),a(g(!1));case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();return s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column is-three-fifths is-offset-one-fifth"},r?s.a.createElement(L,null):s.a.createElement(n.Fragment,null,s.a.createElement("div",{className:"block mt-5"},s.a.createElement(l.b,{to:"/",className:"has-text-weight-medium"},"Retour aux collections")),s.a.createElement("div",{className:"columns my-0 py-0"},s.a.createElement("div",{className:"column is-half is-offset-one-quarter"},s.a.createElement(ne,null),s.a.createElement(se,null))),s.a.createElement("div",{className:"block"},s.a.createElement("div",{className:"content"},s.a.createElement("h1",null,i.title),s.a.createElement("p",null,i.description))),v?s.a.createElement(n.Fragment,null,s.a.createElement("div",{className:"block"},s.a.createElement("form",{onSubmit:x},s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Titre"),s.a.createElement("p",{className:"control"},s.a.createElement("input",{className:"input is-medium is-info",value:_.title,type:"text",name:"title",placeholder:"Titre",onChange:S}))),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Titre"),s.a.createElement("p",{className:"control"},s.a.createElement("textarea",{className:"textarea is-info",value:_.description,type:"textarea",name:"description",placeholder:"Description",onChange:S}))),s.a.createElement("div",{className:"buttons"},s.a.createElement("button",{className:"button is-small is-info",type:"submit"},"Valider"),s.a.createElement("button",{className:"button is-small is-warning",onClick:function(){O(!1)}},"Annuler"))))):s.a.createElement("div",{className:"block"},s.a.createElement("div",{className:"buttons"},s.a.createElement("button",{className:"button is-small is-warning",onClick:function(){O(!0)}},"Modifier"),s.a.createElement("button",{className:"button is-small is-danger",onClick:C},"Supprimer"))),s.a.createElement("h2",{className:"subtitle"},"T\xe2ches"),i.tasks&&i.tasks.length>0?i.tasks.map((function(e){return s.a.createElement(Z,{key:Object(P.a)(),task:e})})):s.a.createElement("p",{className:"is-size-6 has-text-weight-light"},"Aucune t\xe2che associ\xe9e \xe0 cette collection"),s.a.createElement("h2",{className:"subtitle"},"Notes"),i.notes&&i.notes.length>0?i.notes.map((function(e){return s.a.createElement(G,{key:Object(P.a)(),note:e})})):s.a.createElement("p",{className:"is-size-6 has-text-weight-light"},"Aucune note associ\xe9e \xe0 cette collection"),s.a.createElement("h2",{className:"subtitle"},"Processus"),i.processes&&i.processes.length>0?i.processes.map((function(e){return s.a.createElement(q,{key:Object(P.a)(),process:e})})):s.a.createElement("p",{className:"is-size-6 has-text-weight-light"},"Aucun processus associ\xe9e \xe0 cette collection"))))},fe=function(e){var t=Object(u.b)(),a=Object(u.c)((function(e){return e.user})).loading,r=Object(n.useState)(null),c=Object(F.a)(r,2),o=c[0],i=c[1],m=Object(n.useState)(!1),p=Object(F.a)(m,2),b=p[0],v=p[1],O=Object(n.useState)(),N=Object(F.a)(O,2),j=N[0],k=N[1],y=Object(n.useState)(!1),x=Object(F.a)(y,2),S=x[0],C=x[1];Object(n.useEffect)((function(){(function(){var a=Object(E.a)(f.a.mark((function a(){var n;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t(g(!0)),a.next=4,h.a.get("http://localhost:5000/api/notes/get_note/".concat(e.match.params.noteId));case 4:n=a.sent,i(n.data.note),k(n.data.note.content),t(g(!1)),a.next=14;break;case 10:a.prev=10,a.t0=a.catch(0),t(M(a.t0.response&&a.t0.response.data.error_msg?[a.t0.response.data.error_msg]:["Nous sommes d\xe9sol\xe9s, une erreur inattendue s'est produite lors du chargement"])),e.history.push("/");case 14:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(){return a.apply(this,arguments)}})()()}),[]);var w=function(){var e=Object(E.a)(f.a.mark((function e(a){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,t(_({content:j,noteToUpdateId:o._id}));case 3:e.sent&&i(Object(U.a)(Object(U.a)({},o),{},{content:j})),k(o.content),v(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column is-three-fifths is-offset-one-fifth"},o&&!a?s.a.createElement(n.Fragment,null,s.a.createElement("div",{className:"block mt-5"},s.a.createElement(l.b,{to:"/",className:"has-text-weight-medium"},"Retour aux Notes")),s.a.createElement("div",{className:"columns my-0 py-0"},s.a.createElement("div",{className:"column is-half is-offset-one-quarter"},s.a.createElement(ne,null),s.a.createElement(se,null))),b?s.a.createElement("div",{className:"block"},s.a.createElement("form",{onSubmit:w},s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Titre"),s.a.createElement("p",{className:"control"},s.a.createElement("textarea",{className:"textarea is-info",name:"content",value:j,onChange:function(e){k(e.target.value)}}))),s.a.createElement("div",{className:"buttons"},s.a.createElement("button",{className:"button is-small is-info",type:"submit"},"Mettre \xe0 jour"),s.a.createElement("button",{className:"button is-small is-warning",onClick:function(){v(!1)}},"Annuler")))):s.a.createElement(n.Fragment,null,s.a.createElement("div",{className:"block"},s.a.createElement("div",{className:"content"},s.a.createElement("p",null,o.content))),s.a.createElement("div",{className:"block"},s.a.createElement("div",{className:"buttons"},s.a.createElement("button",{className:"button is-small is-warning",onClick:function(){v(!0)}},"Modifier"),s.a.createElement("button",{className:"button is-small is-danger",onClick:function(){var a;t((a=o._id,function(){var e=Object(E.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.delete("/api/notes/delete_note/".concat(a));case 3:n=e.sent,t({type:"DELETE_NOTE",payload:n.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t(M(e.t0.response&&e.t0.response.data&&404!==e.t0.response.status&&e.t0.response.data.error_msg?e.t0.response.data.error_msg:["Oops, une erreur inattendue s'est produite"]));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}())),e.history.push("/")}},"Supprimer")))),s.a.createElement(ie,{origin:"notes",targetDocumentId:o._id,currentCollections:o.collections,removeCollectionFromMotherProcess:function(e){i(Object(U.a)(Object(U.a)({},o),{},{collections:o.collections.filter((function(t){return t._id!==e._id}))}))}}),S?s.a.createElement(ue,{origin:"notes",targetDocumentId:o._id,addCollectionToMotherProcess:function(e){i(Object(U.a)(Object(U.a)({},o),{},{collections:[].concat(Object(d.a)(o.collections),[e])}))},closeAddToCollectionForm:function(){C(!1)}}):s.a.createElement("div",{className:"block"},s.a.createElement("button",{className:"button is-small is-info",onClick:function(){C(!0)}},"Ajouter \xe0 une collection"))):s.a.createElement(L,null)))},Ee=a(27),ve=a(51),he=a(82),Oe=a(81),Ne=a.n(Oe),ge={token:localStorage.getItem("token"),isAuthenticated:!1,loading:!1,user:null,mode:"TASKS",notes:[],collections:[],processes:[],tasks:[],messages:[],error_msgs:[],loading_partial:!1},je={key:"root",storage:Ne.a,whitelist:["user"]},ke=Object(Ee.b)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LOADING":return Object(U.a)(Object(U.a)({},e),{},{loading:t.payload});case"SET_LOADING_PARTIAL":return Object(U.a)(Object(U.a)({},e),{},{loading_partial:t.payload});case"LOGIN_SUCCESS":return localStorage.setItem("token",t.payload.token),Object(U.a)(Object(U.a)({},e),{},{token:t.payload.token,isAuthenticated:!0,loading:!1,user:t.payload.user,messages:[],error_msgs:[]});case"AUTH_ERROR":case"LOGOUT":return localStorage.removeItem("token"),Object(U.a)(Object(U.a)({},e),{},{token:null,isAuthenticated:!1,loading:!1,loading_partial:!1,user:null,notes:[],collections:[],processes:[],tasks:[],messages:[],error_msgs:[],mode:"TASKS"});case"CHANGE_MODE":return Object(U.a)(Object(U.a)({},e),{},{mode:t.payload});case"LOAD_COLLECTIONS":return Object(U.a)(Object(U.a)({},e),{},{collections:t.payload.collections});case"LOAD_NOTES":return Object(U.a)(Object(U.a)({},e),{},{notes:t.payload.notes});case"LOAD_PROCESSES":return Object(U.a)(Object(U.a)({},e),{},{processes:t.payload.processes});case"LOAD_TASKS":return Object(U.a)(Object(U.a)({},e),{},{tasks:t.payload.tasks});case"NEW_TASK_ADDED":return Object(U.a)(Object(U.a)({},e),{},{tasks:[].concat(Object(d.a)(e.tasks),[t.payload.newTask])});case"DELETE_TASK":return Object(U.a)(Object(U.a)({},e),{},{tasks:e.tasks.filter((function(e){return e._id!==t.payload.removedTask._id}))});case"UPDATE_TASk":var a=e.tasks.findIndex((function(e){return e._id===t.payload.updatedTask._id}));return e.tasks[a]=t.payload.updatedTask,Object(U.a)({},e);case"FINISH_TASK":var n=e.tasks.findIndex((function(e){return e._id===t.payload.finishedTask._id}));return e.tasks[n]=t.payload.finishedTask,Object(U.a)({},e);case"UNFINISH_TASK":var s=e.tasks.findIndex((function(e){return e._id===t.payload.unfinishedTask._id}));return e.tasks[s]=t.payload.unfinishedTask,Object(U.a)({},e);case"ADD_SUBTASK":var r=e.tasks.findIndex((function(e){return e._id===t.payload.newSubTask.task._id})),c=e.tasks[r];return c.subtasks=[].concat(Object(d.a)(c.subtasks),[t.payload.newSubTask]),Object(U.a)(Object(U.a)({},e),{},{tasks:[e.tasks,c]});case"DELETE_SUBTASK":var l=e.tasks.findIndex((function(e){return e._id===t.payload.updatedMotherTask._id}));return e.tasks[l]=t.payload.updatedMotherTask,Object(U.a)({},e);case"UPDATE_NOTE":var o=e.notes.findIndex((function(e){return e._id===t.payload.note._id}));return e.notes[o]=t.payload.note,Object(U.a)({},e);case"DELETE_NOTE":return Object(U.a)(Object(U.a)({},e),{},{notes:Object(d.a)(e.notes.filter((function(e){return e._id!==t.payload.removedNote._id})))});case"ADD_NOTE":return Object(U.a)(Object(U.a)({},e),{},{notes:[].concat(Object(d.a)(e.notes),[t.payload.newNote])});case"ADD_PROCESS":return Object(U.a)(Object(U.a)({},e),{},{processes:[].concat(Object(d.a)(e.processes),[t.payload.newProcess])});case"ADD_NEW_COLLECTION":return Object(U.a)(Object(U.a)({},e),{},{collections:[].concat(Object(d.a)(e.collections),[t.payload.newCollection])});case"REMOVE_FROM_COLLECTION":case"ADD_TO_COLLECTION":var i=e.collections.findIndex((function(e){return e._id===t.payload._id}));return e.collections[i]=t.payload,Object(U.a)({},e);case"SET_ERROR_MSGS":var u=t.payload.map((function(e){return{error_msg:e,_id:Object(P.a)()}}));return Object(U.a)(Object(U.a)({},e),{},{error_msgs:[].concat(Object(d.a)(e.error_msgs),Object(d.a)(u))});case"DELETE_INDIVIDUAL_ERROR_MSG":return Object(U.a)(Object(U.a)({},e),{},{error_msgs:e.error_msgs.filter((function(e){return e._id!==t.payload}))});case"DELETE_ALL_ERROR_MSG":return Object(U.a)(Object(U.a)({},e),{},{error_msgs:[]});case"SET_MESSAGES":var m=t.payload.map((function(e){return{msg:e,_id:Object(P.a)()}}));return Object(U.a)(Object(U.a)({},e),{},{messages:[].concat(Object(d.a)(e.messages),Object(d.a)(m))});case"DELETE_INDIVIDUAL_MSG":return Object(U.a)(Object(U.a)({},e),{},{messages:e.messages.filter((function(e){return e._id!==t.payload}))});case"DELETE_ALL_MSG":return Object(U.a)(Object(U.a)({},e),{},{messages:[]});default:return e}}}),_e=Object(ve.a)(je,ke),ye=[he.a],xe=Object(Ee.c)(_e,Ee.a.apply(void 0,ye)),Se=Object(ve.b)(xe),Ce=a(83);var we=function(){return Object(n.useEffect)((function(){localStorage.token&&O(localStorage.token)})),s.a.createElement(u.a,{store:xe},s.a.createElement("div",{className:"main has-background-light"},s.a.createElement(l.a,null,s.a.createElement(Ce.a,{persistor:Se},s.a.createElement(o.d,null,s.a.createElement(p,{exact:!0,path:"/",component:re}),s.a.createElement(o.b,{exact:!0,path:"/login",component:ce}),s.a.createElement(o.b,{exact:!0,path:"/register",component:le}),s.a.createElement(p,{exact:!0,path:"/task/:taskId",component:me}),s.a.createElement(p,{exact:!0,path:"/process/:processId",component:de}),s.a.createElement(p,{exact:!0,path:"/note/:noteId",component:fe}),s.a.createElement(p,{exact:!0,path:"/collection/:collectionId",component:be}),s.a.createElement(o.a,{to:"/"}))))))};c.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(we,null)),document.getElementById("root"))},87:function(e,t,a){e.exports=a(169)},93:function(e,t,a){}},[[87,1,2]]]);
//# sourceMappingURL=main.67b7db55.chunk.js.map